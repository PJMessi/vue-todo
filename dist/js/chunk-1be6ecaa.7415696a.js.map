{"version":3,"sources":["webpack:///./node_modules/khalti-web/lib/index.js","webpack:///./src/views/Package.vue?303d","webpack:///src/views/Package.vue","webpack:///./src/views/Package.vue?1bea","webpack:///./src/views/Package.vue"],"names":["unwrapExports","x","__esModule","createCommonjsModule","fn","module","exports","lib","Object","defineProperty","value","_typeof","Symbol","iterator","obj","constructor","SkipValidation","message","this","name","validateSingle","data","validators","multipleErrors","all","key","errors","i","length","error","push","replace","err","validate","noError","prop","hasOwnProperty","undefined","required","flag","isNullLike","isNumber","isNaN","isString","isFunction","isObject","isArray","prototype","toString","call","_length","str","isEmail","pattern","test","equalsTo","minLength","maxLength","isBoolean","within","list","Array","odds","index","indexOf","excludes","regex","lib_3","lib_4","lib_7","lib_8","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","WIDGET_URL","forEach","iteratee","keys","map","clone","JSON","parse","stringify","eventHandlerSchema","onSuccess","onError","onClose","configSchema","publicKey","productUrl","productIdentity","productName","eventHandler","amount","merchantData","KhaltiCheckout","config","_widgetId","Date","now","_config","_widget","attachWidget","listenToWidget","_this","window","addEventListener","e","realm","widgetInit","payload","widget_id","handler","widgetId","contentWindow","postMessage","paymentInfo","msgWidget","Error","_errors","hide","errorHandler","parentOverflowValue","document","body","style","overflowY","updates","source","setAttribute","assign","validateConfig","disableParentScrollbar","display","closeHandler","enableParentScrollbar","widget","createElement","position","top","left","width","height","innerHeight","zIndex","appendChild","khaltiEbankingFormId","ebankingForm","removeChild","form","url","input","submit","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","preventDefault","fetchPackages","class","packagesListBeingUpdated","_m","packages","_l","paymentPackage","_id","_s","price","duration","description","activePackageId","_e","subscribe","subscribeWithKhalti","staticRenderFns","created","computed","subscriptions","subscription","methods","gateway","subscribeWithEsewa","amt","packageAmount","psc","serviceCharge","pdc","deliveryCharge","txAmt","taxAmount","tAmt","totalAmount","pid","scd","su","fu","esewa","hiddenField","vm","handleKhaltiSubscription","console","log","checkout","show","component"],"mappings":"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","file":"js/chunk-1be6ecaa.7415696a.js","sourcesContent":["'use strict';\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar lib = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar SkipValidation = exports.SkipValidation = function SkipValidation(message) {\n\tthis.name = \"SkipValidation\";\n\tthis.message = message;\n};\n\nvar validateSingle = exports.validateSingle = function validateSingle(data, validators, multipleErrors, all, key) {\n\tvar errors = [];\n\n\tif (typeof validators === \"function\") {\n\t\tvalidators = [validators];\n\t}\n\n\tfor (var i = 0; i < validators.length; i++) {\n\t\ttry {\n\t\t\tvar error = validators[i](data, all);\n\t\t\tif (typeof error === \"string\") {\n\t\t\t\terrors.push(error.replace(\"{value}\", data).replace(\"{key}\", key));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (err instanceof SkipValidation) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (multipleErrors === true) return errors;\n\n\tif (errors.length > 0) return errors[0];\n};\n\nvar validate = exports.validate = function validate(data, validators, multipleErrors) {\n\tif (!validators) return;\n\n\tvar errors = {};\n\tvar noError = true;\n\n\tif ((typeof validators === \"undefined\" ? \"undefined\" : _typeof(validators)) === \"object\" && !validators.length) {\n\t\tfor (var prop in validators) {\n\t\t\tif (validators.hasOwnProperty(prop)) {\n\t\t\t\tvar error = validateSingle(data[prop], validators[prop], multipleErrors, data, prop);\n\n\t\t\t\tif (error !== undefined) {\n\t\t\t\t\tnoError = false;\n\t\t\t\t}\n\n\t\t\t\terrors[prop] = error;\n\t\t\t}\n\t\t}\n\n\t\treturn noError ? undefined : errors;\n\t}\n\n\terrors = validateSingle(data, validators, multipleErrors);\n\treturn errors;\n};\n\nvar required = exports.required = function required(flag, error) {\n\tfunction isNullLike(value) {\n\t\treturn value === undefined || value === \"\" || value === null;\n\t}\n\n\treturn function (value) {\n\t\tif (flag && isNullLike(value)) {\n\t\t\treturn error || \"This field is required.\";\n\t\t} else if (!flag && isNullLike(value)) {\n\t\t\t// skip rest of the validators\n\t\t\tthrow new SkipValidation();\n\t\t}\n\t};\n};\n\nvar isNumber = exports.isNumber = function isNumber(error) {\n\treturn function (value) {\n\t\tif (typeof value !== \"number\" || isNaN(value)) {\n\t\t\treturn error || \"'{value}' is not a valid number.\";\n\t\t}\n\t};\n};\n\nvar isString = exports.isString = function isString(error) {\n\treturn function (value) {\n\t\tif (typeof value !== \"string\") {\n\t\t\treturn error || \"'{value}' is not a valid string.\";\n\t\t}\n\t};\n};\n\nvar isFunction = exports.isFunction = function isFunction(error) {\n\treturn function (value) {\n\t\tif (typeof value !== \"function\") {\n\t\t\treturn error || \"Expected a function.\";\n\t\t}\n\t};\n};\n\nvar isObject = exports.isObject = function isObject(error) {\n\treturn function (value) {\n\t\tif (value !== Object(value)) {\n\t\t\treturn error || \"Expected an object.\";\n\t\t}\n\t};\n};\n\nvar isArray = exports.isArray = function isArray(error) {\n\treturn function (value) {\n\t\tif (Object.prototype.toString.call(value) !== \"[object Array]\") {\n\t\t\treturn error || \"Expected an array.\";\n\t\t}\n\t};\n};\n\nvar length = exports.length = function length(_length, error) {\n\treturn function (value) {\n\t\tvar str = value + \"\";\n\t\tif (str.length !== _length) {\n\t\t\treturn error || \"It must be \" + _length + \" characters long.\";\n\t\t}\n\t};\n};\n\nvar isEmail = exports.isEmail = function isEmail(error) {\n\treturn function (value) {\n\t\tvar pattern = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tif (!pattern.test(value)) {\n\t\t\treturn error || \"Invalid email id.\";\n\t\t}\n\t};\n};\n\nvar equalsTo = exports.equalsTo = function equalsTo(key, error) {\n\treturn function (value, all) {\n\t\tif (value !== all[key]) {\n\t\t\treturn error || \"'{key}' and '\" + key + \"' do not match.\";\n\t\t}\n\t};\n};\n\nvar minLength = exports.minLength = function minLength(length, error) {\n\treturn function (value) {\n\t\tvar str = value + \"\";\n\t\tif (str.length < length) {\n\t\t\treturn error || \"It must be at least \" + length + \" characters long.\";\n\t\t}\n\t};\n};\n\nvar maxLength = exports.maxLength = function maxLength(length, error) {\n\treturn function (value) {\n\t\tvar str = value + \"\";\n\t\tif (str.length > length) {\n\t\t\treturn error || \"It must be at most \" + length + \" characters long.\";\n\t\t}\n\t};\n};\n\nvar isBoolean = exports.isBoolean = function isBoolean(error) {\n\treturn function (value) {\n\t\tif (value !== true && value !== false) {\n\t\t\treturn error || \"Invalid boolean value.\";\n\t\t}\n\t};\n};\n\nvar within = exports.within = function within(list, error) {\n\treturn function (value) {\n\t\tif (!(value instanceof Array)) {\n\t\t\tvalue = [value];\n\t\t}\n\n\t\tvar odds = [];\n\n\t\tfor (var index = 0; index < value.length; index++) {\n\t\t\tif (list.indexOf(value[index]) === -1) {\n\t\t\t\todds.push(value[index]);\n\t\t\t}\n\t\t}\n\n\t\tif (odds.length > 0) {\n\t\t\treturn error || \"[\" + odds + \"] do not fall under the allowed list.\";\n\t\t}\n\t};\n};\n\nvar excludes = exports.excludes = function excludes(list, error) {\n\treturn function (value) {\n\t\tif (!(value instanceof Array)) {\n\t\t\tvalue = [value];\n\t\t}\n\n\t\tvar odds = [];\n\n\t\tfor (var index = 0; index < value.length; index++) {\n\t\t\tif (list.indexOf(value[index]) !== -1) {\n\t\t\t\todds.push(value[index]);\n\t\t\t}\n\t\t}\n\n\t\tif (odds.length > 0) {\n\t\t\treturn error || \"[\" + odds + \"] fall under restricted values.\";\n\t\t}\n\t};\n};\n\nvar pattern = exports.pattern = function pattern(regex, error) {\n\treturn function (value) {\n\t\tif (!regex.test(value)) {\n\t\t\treturn error || \"'{value}' does not match with the pattern.\";\n\t\t}\n\t};\n};\n});\n\nunwrapExports(lib);\nvar lib_1 = lib.SkipValidation;\nvar lib_2 = lib.validateSingle;\nvar lib_3 = lib.validate;\nvar lib_4 = lib.required;\nvar lib_5 = lib.isNumber;\nvar lib_6 = lib.isString;\nvar lib_7 = lib.isFunction;\nvar lib_8 = lib.isObject;\nvar lib_9 = lib.isArray;\nvar lib_10 = lib.length;\nvar lib_11 = lib.isEmail;\nvar lib_12 = lib.equalsTo;\nvar lib_13 = lib.minLength;\nvar lib_14 = lib.maxLength;\nvar lib_15 = lib.isBoolean;\nvar lib_16 = lib.within;\nvar lib_17 = lib.excludes;\nvar lib_18 = lib.pattern;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar WIDGET_URL = undefined || \"https://khalti.com/payment/widget/\";\n\nvar forEach = function forEach(data, iteratee) {\n\tif (Array.isArray(data)) {\n\t\treturn data.forEach(iteratee);\n\t}\n\treturn Object.keys(data).map(function (key) {\n\t\treturn iteratee(data[key], key);\n\t});\n};\n\nvar clone = function clone(data) {\n\tif (!data) return data;\n\treturn JSON.parse(JSON.stringify(data));\n};\n\nvar eventHandlerSchema = {\n\tonSuccess: [lib_4(true), lib_7()],\n\tonError: [lib_4(false), lib_7()],\n\tonClose: [lib_4(false), lib_7()]\n};\n\nvar configSchema = {\n\tpublicKey: lib_4(true),\n\tproductUrl: lib_4(true),\n\tproductIdentity: lib_4(true),\n\tproductName: lib_4(true),\n\teventHandler: lib_4(true),\n\tamount: lib_4(true),\n\tmerchantData: [lib_4(false), lib_8()]\n};\n\nvar KhaltiCheckout = function () {\n\tfunction KhaltiCheckout(config) {\n\t\t_classCallCheck(this, KhaltiCheckout);\n\n\t\tthis._widgetId = \"khalti-widget-\" + Date.now();\n\t\tthis._config = config;\n\t\tthis._widget = this.attachWidget();\n\t\tthis.listenToWidget();\n\t}\n\n\t_createClass(KhaltiCheckout, [{\n\t\tkey: \"listenToWidget\",\n\t\tvalue: function listenToWidget() {\n\t\t\tvar _this = this;\n\n\t\t\twindow.addEventListener(\"message\", function (e) {\n\t\t\t\tif (!e.data.realm) return;\n\t\t\t\tif (e.data.realm === 'widgetInit') {\n\t\t\t\t\t_this.widgetInit(e.data.payload);\n\t\t\t\t} else if (!e.data.payload || e.data.payload.widget_id !== _this._widgetId) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tvar handler = \"handle_msg_\" + e.data.realm;\n\t\t\t\t\t_this[handler](e.data.payload);\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\t}, {\n\t\tkey: \"msgWidget\",\n\t\tvalue: function msgWidget(realm, payload) {\n\t\t\tpayload = clone(payload);\n\t\t\tpayload.widgetId = this._widgetId;\n\t\t\tthis._widget.contentWindow.postMessage({ realm: realm, payload: payload }, \"*\");\n\t\t}\n\t}, {\n\t\tkey: \"handle_msg_widgetInit\",\n\t\tvalue: function handle_msg_widgetInit() {\n\t\t\tthis.widgetInit();\n\t\t}\n\t}, {\n\t\tkey: \"widgetInit\",\n\t\tvalue: function widgetInit() {\n\t\t\tvar paymentInfo = clone(this._config);\n\t\t\tdelete paymentInfo.eventHandler;\n\t\t\tthis.msgWidget(\"paymentInfo\", paymentInfo);\n\t\t}\n\t}, {\n\t\tkey: \"validateConfig\",\n\t\tvalue: function validateConfig() {\n\t\t\tvar errors = lib_3(this._config, configSchema);\n\t\t\tif (errors) {\n\t\t\t\tthrow new Error(JSON.stringify(errors));\n\t\t\t} else {\n\t\t\t\tvar _errors = lib_3(this._config.eventHandler, eventHandlerSchema);\n\t\t\t\tif (_errors) {\n\t\t\t\t\tthrow new Error(JSON.stringify({ eventHandler: _errors }));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"handle_msg_walletPaymentVerification\",\n\t\tvalue: function handle_msg_walletPaymentVerification(paymentInfo) {\n\t\t\tthis._config.eventHandler.onSuccess(paymentInfo);\n\t\t\tthis.hide();\n\t\t}\n\t}, {\n\t\tkey: \"handle_msg_widgetError\",\n\t\tvalue: function handle_msg_widgetError(error) {\n\t\t\tvar errorHandler = this._config.eventHandler.onError;\n\t\t\terrorHandler && errorHandler(error);\n\t\t}\n\t}, {\n\t\tkey: \"disableParentScrollbar\",\n\t\tvalue: function disableParentScrollbar() {\n\t\t\tthis.parentOverflowValue = window.document.body.style.overflowY;\n\t\t\twindow.document.body.style.overflowY = \"hidden\";\n\t\t}\n\t}, {\n\t\tkey: \"enableParentScrollbar\",\n\t\tvalue: function enableParentScrollbar() {\n\t\t\twindow.document.body.style.overflowY = this.parentOverflowValue;\n\t\t\tthis.parentOverflowValue = null;\n\t\t}\n\t}, {\n\t\tkey: \"show\",\n\t\tvalue: function show(updates) {\n\t\t\tthis._config.source = \"web\";\n\t\t\tthis._widget.setAttribute(\"src\", WIDGET_URL);\n\t\t\tObject.assign(this._config, updates);\n\t\t\tthis.validateConfig();\n\t\t\tthis.disableParentScrollbar();\n\t\t\tthis._widget.style.display = \"block\";\n\t\t\tthis.widgetInit();\n\t\t}\n\t}, {\n\t\tkey: \"handle_msg_hide\",\n\t\tvalue: function handle_msg_hide() {\n\t\t\tthis.hide();\n\t\t\tvar closeHandler = this._config.eventHandler.onClose;\n\t\t\tcloseHandler && closeHandler();\n\t\t}\n\t}, {\n\t\tkey: \"hide\",\n\t\tvalue: function hide() {\n\t\t\tthis.enableParentScrollbar();\n\t\t\tthis._widget.style.display = \"none\";\n\t\t}\n\t}, {\n\t\tkey: \"attachWidget\",\n\t\tvalue: function attachWidget() {\n\t\t\tvar widget = window.document.createElement(\"iframe\");\n\t\t\twidget.setAttribute(\"id\", this._widgetId);\n\t\t\twidget.style.position = \"fixed\";\n\t\t\twidget.style.display = \"none\";\n\t\t\twidget.style.top = \"0\";\n\t\t\twidget.style.left = \"0\";\n\t\t\twidget.width = \"100%\";\n\t\t\twidget.height = window.innerHeight + \"px\";\n\t\t\t// widget.setAttribute(\"src\", undefined);\n\t\t\twidget.style.zIndex = 999999999;\n\t\t\twidget.setAttribute(\"frameborder\", 0);\n\t\t\twidget.setAttribute(\"allowtransparency\", true);\n\n\t\t\twindow.document.body.appendChild(widget);\n\n\t\t\treturn widget;\n\t\t}\n\t}, {\n\t\tkey: \"postAtURL\",\n\t\tvalue: function postAtURL(payload) {\n\t\t\tvar khaltiEbankingFormId = \"khalti-ebanking-form-\" + Date.now();\n\t\t\t// remove earlier form if exists\n\t\t\tif (this.ebankingForm) window.document.body.removeChild(this.ebankingForm);\n\n\t\t\t// create new form\n\t\t\tvar form = window.document.createElement(\"form\");\n\t\t\tform.setAttribute(\"id\", khaltiEbankingFormId);\n\t\t\tform.setAttribute(\"action\", payload.url);\n\t\t\tform.setAttribute(\"target\", \"_blank\");\n\t\t\tform.setAttribute(\"method\", \"POST\");\n\t\t\tform.style.display = \"none\";\n\n\t\t\t// attach inputs to form\n\t\t\tforEach(payload.paymentInfo, function (value, key) {\n\t\t\t\tvar input = window.document.createElement(\"input\");\n\t\t\t\tinput.setAttribute(\"name\", key);\n\t\t\t\tinput.value = value;\n\t\t\t\tform.appendChild(input);\n\t\t\t});\n\n\t\t\t// attach form to body\n\t\t\twindow.document.body.appendChild(form);\n\t\t\tthis.ebankingForm = form;\n\n\t\t\tform.submit();\n\t\t}\n\t}]);\n\n\treturn KhaltiCheckout;\n}();\n\nmodule.exports = KhaltiCheckout;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-content\"},[_c('div',{staticClass:\"page-info\"},[_c('nav',{attrs:{\"aria-label\":\"breadcrumb\"}},[_c('ol',{staticClass:\"breadcrumb\"},[_c('li',{staticClass:\"breadcrumb-item\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Dashboard\")])],1),_c('li',{staticClass:\"breadcrumb-item active\",attrs:{\"aria-current\":\"page\"}},[_vm._v(\"Packages\")])])])]),_c('div',{staticClass:\"main-wrapper\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-12\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\" Packages \"),_c('a',{staticClass:\"card-title-helper blockui-transactions\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.fetchPackages()}}},[_c('i',{staticClass:\"fas fa-redo-alt\",class:{'fa-spin': _vm.packagesListBeingUpdated}})])]),_c('div',{staticClass:\"table-responsive\"},[_c('table',{staticClass:\"table table-striped\"},[_vm._m(0),_c('tbody',[(_vm.packages.length==0)?_c('tr',[(_vm.packagesListBeingUpdated)?_c('td',{attrs:{\"colspan\":\"5\"}},[_c('i',{staticClass:\"fas fa-spinner fa-spin ml-2\"}),_vm._v(\" Loading...\")]):_c('td',{attrs:{\"colspan\":\"5\"}},[_vm._v(\"No packages found...\")])]):_vm._l((_vm.packages),function(paymentPackage){return _c('tr',{key:paymentPackage._id},[_c('td',[_vm._v(_vm._s(paymentPackage.name))]),_c('td',[_vm._v(\"Rs \"+_vm._s(paymentPackage.price))]),_c('td',[_vm._v(_vm._s(paymentPackage.duration)+\" Months\")]),_c('td',[_vm._v(_vm._s(paymentPackage.description))]),_c('td',[(_vm.activePackageId == paymentPackage._id)?_c('span',{staticClass:\"badge badge-success\"},[_vm._v(\"Active\")]):_vm._e(),(!_vm.activePackageId)?_c('button',{staticClass:\"btn btn-primary btn-xs\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.subscribe(paymentPackage, 'esewa')}}},[_vm._v(\" Subscribe with esewa \")]):_vm._e(),(!_vm.activePackageId)?_c('button',{staticClass:\"btn btn-primary btn-xs ml-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.subscribeWithKhalti(paymentPackage)}}},[_vm._v(\" Subscribe with Khalti \")]):_vm._e()])])})],2)])])])])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Name\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Price\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Duration\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Description\")]),_c('th')])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"page-content\">\n      <div class=\"page-info\">\n        <nav aria-label=\"breadcrumb\">\n          <ol class=\"breadcrumb\">\n            <li class=\"breadcrumb-item\"><router-link to=\"/\">Dashboard</router-link></li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">Packages</li>\n          </ol>\n        </nav>\n      </div>\n      <div class=\"main-wrapper\">\n        <div class=\"row\">\n          <div class=\"col-lg-12\">\n            <div class=\"card\">\n              <div class=\"card-body\">\n                <h5 class=\"card-title\">\n                  Packages\n                  <a\n                    href=\"#\"\n                    @click.prevent=\"fetchPackages()\"\n                    class=\"card-title-helper blockui-transactions\"\n                    >\n                    <i class=\"fas fa-redo-alt\" :class=\"{'fa-spin': packagesListBeingUpdated}\"></i>\n                  </a>\n                </h5>\n                <div class=\"table-responsive\">\n                  <table class=\"table table-striped\">\n                    <thead>\n                      <tr>\n                        <th scope=\"col\">Name</th>\n                        <th scope=\"col\">Price</th>\n                        <th scope=\"col\">Duration</th>\n                        <th scope=\"col\">Description</th>\n                        <th></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n\n                      <tr v-if=\"packages.length==0\">\n                        <td colspan=\"5\" v-if=\"packagesListBeingUpdated\"><i class=\"fas fa-spinner fa-spin ml-2\"></i> Loading...</td>\n                        <td colspan=\"5\" v-else>No packages found...</td>\n                      </tr>\n\n                      <tr\n                        v-else\n                        v-for=\"paymentPackage in packages\"\n                        :key=\"paymentPackage._id\"\n                      >\n                        <td>{{ paymentPackage.name }}</td>\n                        <td>Rs {{ paymentPackage.price }}</td>\n                        <td>{{ paymentPackage.duration }} Months</td>\n                        <td>{{ paymentPackage.description }}</td>\n                        <td>\n                          <span\n                            v-if=\"activePackageId == paymentPackage._id\"\n                            class=\"badge badge-success\"\n                            >Active</span\n                          >\n\n                          <button\n                            v-if=\"!activePackageId\"\n                            type=\"button\"\n                            class=\"btn btn-primary btn-xs\"\n                            @click=\"subscribe(paymentPackage, 'esewa')\"\n                          >\n                            Subscribe with esewa\n                          </button>\n\n                          <button\n                            v-if=\"!activePackageId\"\n                            type=\"button\"\n                            class=\"btn btn-primary btn-xs ml-2\"\n                            @click=\"subscribeWithKhalti(paymentPackage)\"\n                          >\n                            Subscribe with Khalti\n                          </button>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\nimport KhaltiCheckout from \"khalti-web\";\nimport axios from 'axios'\n\nexport default {\n  name: \"Package\",\n\n  data() {\n    return {\n      \n    };\n  },\n\n  created() {\n    this.fetchPackages();\n  },\n\n  computed: {\n    ...mapGetters([\"authUser\", \"packages\", \"packagesListBeingUpdated\"]),\n\n    activePackageId: function () {\n      const subscriptions = this.authUser.subscriptions\n      if (!subscriptions) return null;\n\n      const subscription = this.authUser.subscriptions[0];\n      if (!subscription) return null;\n\n      return subscription.paymentPackage;\n    },\n  },\n\n  methods: {\n    ...mapActions([\"fetchPackages\", \"fetchProfile\"]),\n\n    subscribe(paymentPackage, gateway) {\n      if (gateway == \"esewa\") {\n        this.subscribeWithEsewa(paymentPackage);\n      } else if (gateway == \"khalti\") {\n        this.subscribeWithKhalti(paymentPackage);\n      }\n    },\n\n    subscribeWithEsewa(paymentPackage) {\n      const packageAmount = paymentPackage.price;\n      const taxAmount = 0;\n      const serviceCharge = 0;\n      const deliveryCharge = 0;\n      const totalAmount =\n        packageAmount + taxAmount + serviceCharge + deliveryCharge;\n\n      const esewa = {\n        amt: packageAmount,\n        psc: serviceCharge,\n        pdc: deliveryCharge,\n        txAmt: taxAmount,\n        tAmt: totalAmount,\n        pid: paymentPackage._id,\n        scd: process.env.VUE_APP_ESEWA_MERCHANT_ID,\n        su: `${process.env.VUE_APP_URL}/#/webhooks/esewa/success`,\n        fu: `${process.env.VUE_APP_URL}/#/webhooks/esewa/failed`,\n      };\n\n      var form = document.createElement(\"form\");\n      form.setAttribute(\"method\", \"POST\");\n      form.setAttribute(\"action\", \"https://uat.esewa.com.np/epay/main\");\n\n      for (var key in esewa) {\n        var hiddenField = document.createElement(\"input\");\n        hiddenField.setAttribute(\"type\", \"hidden\");\n        hiddenField.setAttribute(\"name\", key);\n        hiddenField.setAttribute(\"value\", esewa[key]);\n        form.appendChild(hiddenField);\n      }\n\n      document.body.appendChild(form);\n      form.submit();\n    },\n\n    subscribeWithKhalti(paymentPackage) {\n      let vm = this\n\n      let khaltiConfig = {\n        publicKey: process.env.VUE_APP_KHALTI_MERCHANT_ID,\n        productIdentity: paymentPackage._id,\n        productName: paymentPackage.name,\n        productUrl: `${process.env.VUE_APP_URL}/#/packages`,\n        amount: paymentPackage.price*100,\n        eventHandler: {\n          onSuccess(payload) {\n            vm.handleKhaltiSubscription(payload)            \n\n          },\n          onError(error) {\n            console.log(error);\n          },\n          onClose() {\n            console.log(\"widget is closing\");\n          },\n        },\n      }\n\n    \n      let checkout = new KhaltiCheckout(khaltiConfig);\n      checkout.show({ amount: khaltiConfig.amount });\n    },\n\n    handleKhaltiSubscription(payload) {\n      axios.post(`${process.env.VUE_APP_API_BASE_URL}/customer/payments/khalti`, payload)\n        .then(res => {\n          console.log(res)\n          this.fetchProfile().then(() => {\n            this.$Toast.fire({\n              icon: 'success',\n              title: 'Subscription successful'\n            })\n          })\n\n        })\n        .catch(err => {\n          console.log(err)\n          this.$Toast.fire({\n              icon: 'error',\n              title: 'Subscription failed'\n            })\n        })\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Package.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Package.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Package.vue?vue&type=template&id=cb356042&\"\nimport script from \"./Package.vue?vue&type=script&lang=js&\"\nexport * from \"./Package.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}